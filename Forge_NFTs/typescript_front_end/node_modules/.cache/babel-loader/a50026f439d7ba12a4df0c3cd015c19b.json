{"ast":null,"code":"import _regeneratorRuntime from \"/home/forgeserver/Desktop/MainNet-Forge-NFT/defi-stake-yield-brownie-main/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/forgeserver/Desktop/MainNet-Forge-NFT/defi-stake-yield-brownie-main/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/forgeserver/Desktop/MainNet-Forge-NFT/defi-stake-yield-brownie-main/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState } from 'react';\nimport { useTransactionsContext } from '../providers';\nexport function usePromiseTransaction(chainId, options) {\n  var _useState = useState({\n    status: 'None'\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _useTransactionsConte = useTransactionsContext(),\n      addTransaction = _useTransactionsConte.addTransaction;\n\n  var promiseTransaction = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(transactionPromise) {\n      var _a, _b, _c, _d, _e, transaction, receipt, errorMessage;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (chainId) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              transaction = undefined;\n              _context.prev = 3;\n              _context.next = 6;\n              return transactionPromise;\n\n            case 6:\n              transaction = _context.sent;\n              setState({\n                transaction: transaction,\n                status: 'Mining',\n                chainId: chainId\n              });\n              addTransaction({\n                transaction: Object.assign(Object.assign({}, transaction), {\n                  chainId: chainId\n                }),\n                submittedAt: Date.now(),\n                transactionName: options === null || options === void 0 ? void 0 : options.transactionName\n              });\n              _context.next = 11;\n              return transaction.wait();\n\n            case 11:\n              receipt = _context.sent;\n              setState({\n                receipt: receipt,\n                transaction: transaction,\n                status: 'Success',\n                chainId: chainId\n              });\n              return _context.abrupt(\"return\", receipt);\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](3);\n              errorMessage = (_e = (_c = (_b = (_a = _context.t0.error) === null || _a === void 0 ? void 0 : _a.message) !== null && _b !== void 0 ? _b : _context.t0.reason) !== null && _c !== void 0 ? _c : (_d = _context.t0.data) === null || _d === void 0 ? void 0 : _d.message) !== null && _e !== void 0 ? _e : _context.t0.message;\n\n              if (transaction) {\n                setState({\n                  status: 'Fail',\n                  transaction: transaction,\n                  receipt: _context.t0.receipt,\n                  errorMessage: errorMessage,\n                  chainId: chainId\n                });\n              } else {\n                setState({\n                  status: 'Exception',\n                  errorMessage: errorMessage,\n                  chainId: chainId\n                });\n              }\n\n              return _context.abrupt(\"return\", undefined);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 16]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [chainId, setState, addTransaction, options]);\n  return {\n    promiseTransaction: promiseTransaction,\n    state: state\n  };\n}","map":{"version":3,"sources":["../../../../src/hooks/usePromiseTransaction.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { useCallback, useState } from 'react';\nimport { useTransactionsContext } from '../providers';\nexport function usePromiseTransaction(chainId, options) {\n    const [state, setState] = useState({ status: 'None' });\n    const { addTransaction } = useTransactionsContext();\n    const promiseTransaction = useCallback(async (transactionPromise) => {\n        var _a, _b, _c, _d, _e;\n        if (!chainId)\n            return;\n        let transaction = undefined;\n        try {\n            transaction = await transactionPromise;\n            setState({ transaction, status: 'Mining', chainId });\n            addTransaction({\n                transaction: Object.assign(Object.assign({}, transaction), { chainId: chainId }),\n                submittedAt: Date.now(),\n                transactionName: options === null || options === void 0 ? void 0 : options.transactionName,\n            });\n            const receipt = await transaction.wait();\n            setState({ receipt, transaction, status: 'Success', chainId });\n            return receipt;\n        }\n        catch (e) {\n            const errorMessage = (_e = (_c = (_b = (_a = e.error) === null || _a === void 0 ? void 0 : _a.message) !== null && _b !== void 0 ? _b : e.reason) !== null && _c !== void 0 ? _c : (_d = e.data) === null || _d === void 0 ? void 0 : _d.message) !== null && _e !== void 0 ? _e : e.message;\n            if (transaction) {\n                setState({ status: 'Fail', transaction, receipt: e.receipt, errorMessage, chainId });\n            }\n            else {\n                setState({ status: 'Exception', errorMessage, chainId });\n            }\n            return undefined;\n        }\n    }, [chainId, setState, addTransaction, options]);\n    return { promiseTransaction, state };\n}\n//# sourceMappingURL=usePromiseTransaction.js.map"]},"metadata":{},"sourceType":"module"}